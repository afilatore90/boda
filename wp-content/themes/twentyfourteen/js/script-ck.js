function init(){util=new Utiles;modal=new Modal(modal_object_confirm);idioma=new Idioma(lang,"#idiomas-section");var e=$("body").attr("id");initialize[e]!=undefined?initialize[e]():null;is_single?initSingle():null;$(".btn-idioma").on("click",idioma.changeIdioma)}function initMenu(){}function Menu(e,t,n){$this=this;this.aside_header=e;this.header_blur=t;this.hero_img=n;this.animando=!0;this.show_menu=function(){$(this).addClass("activo");$($this.aside_header+","+$this.header_blur).addClass("activo")};this.hide_menu=function(){$("#btn-menu").removeClass("activo");$($this.aside_header+","+$this.header_blur).removeClass("activo")}}function initHome(){$(".anima-section").each(function(e){var t=$(this).data("name");lista_escenas.push({name:t})});util.setAlto("#idiomas-section");util.setAlto(".anima-section");util.mobilecheck()||(window.onload=function(){var t=skrollr.init({easing:{wtf:Math.random,inverted:function(e){return 1-e}}}),n=util.getUrlVar("section");n&&setTimeout(function(){e.scroll_to(1)},500)});testigos=new Testigos(".get-testigo","#modal-testigo");var e=new Home(lista_escenas,"#aside-ul"),t={modal:"#modal-testigo",overlay:"#modal-overlay",btnClose:"#btn-close-testigo",messages:lista_messages,htmlIn:!0,ownCallback:!0,callback:testigos.show_testigo};modal_t=new Modal(t);$("#btn-scroll").on("click",function(){e.scroll_to($(this).data("scroll_to"))});$("#aside-ul li").on("click",function(){e.scroll_to($(this).data("scroll_to"))})}function Home(e,t){var n=this;this.lista_escenas=e;this.nav=t;this.doc=document;this.indice=0;this.scrollAnterior=0;this.scroll_to=function(e){var t=$(n.doc).scrollTop(),r=$("#anima-section"+e).offset().top,i=Math.round(Math.abs((r-t)/util.altoW())),s=i!=0?i*750:750;$("html,body").animate({scrollTop:r},s)};this.pinta_nav=function(){var e="";for(var t=0;t<this.lista_escenas.length;t++)t==0?e+="<li class='activo' data-scroll_to ="+t+"><p>"+this.lista_escenas[t].name+"</p><span></span></li>":e+="<li data-scroll_to ="+t+"><p>"+this.lista_escenas[t].name+"</p><span></span></li>";$(this.nav).html(e)};var r=function(){$(n.nav).children("li").removeClass("activo");$(n.nav).children("li").eq(n.indice).addClass("activo")};this.scrollea=function(e){var t=$(this).scrollTop();if(n.indice<n.lista_escenas.length){var i=$("#anima-section"+n.indice).offset().top+$("#anima-section"+n.indice).height(),s=t>n.scrollAnterior?!0:!1;if(t>i-util.altoW()/2&&s&&t>0){n.indice++;r()}else if(t<i-(util.altoW()+util.altoW()/2)&&!s&&t>0){n.indice--;r()}}n.scrollAnterior=t};$(this.doc).on("scroll",n.scrollea).on("keydown",n.scroll_keys);this.pinta_nav()}function Testigos(e,t){var n=this;this.testigos=e;this.modal_testigo=t;this.get_testigos=function(e){var t={testigo:"testigo",id:e},n={url:url_ajax,dataType:"json",typeMethod:"POST",data:t,success:pinta_testigo,errorf:error_testigo},r=new Ajax(n);r.get_ajax()};this.show_testigo=function(e){var t=$(n.modal_testigo).children(".modal-content"),r=t.children(".img-box"),i=t.children(".text-box");r.css({"background-image":"url("+e.img+")"});i.html(e.post_content)};$(n.testigos).on("click",function(e){e.preventDefault();var t=$(this).data("id");n.get_testigos(t)})}function pinta_testigo(e){testigos.show_testigo(e);modal_t.modal_show()}function error_testigo(e){modal.modal_show("error-testigo")}function initConfirmarAsitencia(){var e=new ConfirmarAsistencia("#confirmar-form","#asistentes-ul","#asistentes-select");$("#asistentes-select").on("change",e.add_asistentes)}function ConfirmarAsistencia(e,t,n){var r=this;this.form_id=e;this.asistentes_ul=t;this.asistentes_select=n;this.fill_select=function(e){var t="";for(var n=0;n<e;n++)t+='<option value="'+(n+1)+'">'+(n+1)+"</option>";$(r.asistentes_select).html(t)};this.add_asistentes=function(){var e=$(r.asistentes_select).val(),t="";for(var n=0;n<e;n++)t+='<li id="asistente'+(n+1)+'">'+"<h3>"+(n+1)+"º Asistente</h3>"+'<label class="n-input">'+"<span>Nombre y Appellido *</span>"+'<input class="required" type="text" id="nombre'+(n+1)+'" name="nombre'+(n+1)+'" placeholder="Escribe el nombre y apellido del Asistente '+(n+1)+'">'+"</label>"+'<div class="checkContainer blanco">'+'<div class="status"></div>'+'<input id="pre-boda'+(n+1)+'" type="checkbox" name="pre-boda'+(n+1)+'">'+'<label for="pre-boda'+(n+1)+'">'+'<span class="checkSquare"><span></span></span>'+'<p class="name">Asistirá a la pre-boda</p>'+"</label>"+"</div>"+"</li>";$(r.asistentes_ul).html(t);var i=new Form(this.form_id);i.validation()};this.fill_select(10);this.add_asistentes()}function confirm_asistencia(e){modal.modal_show("correct-confirm");var t="";for(var n=0;n<e.length;n++)t+="<li>"+e[n].name+"</li>";$("#confirm-asistentes-ul").html(t)}function error1(e){modal.modal_show("error-confirm")}function initSingle(){}function Single(e,t){}function Idioma(e,t){var n=this;this.lang=e;this.section=t;this.changeIdioma=function(){n.lang!=$(this).data("lang")?window.location=$(this).attr("href"):n.removeIdiomaSection();return!1};this.removeIdiomaSection=function(){$(n.section).transition({y:"-100%"},500);$("body,html").animate({scrollTop:0},0)}}function Utiles(){var e=this;this.preload=function(e,t){var n=t;for(var r=0;r<e.length;r++){var i=e[r];$("<img/>")[0].src=i;r==len-1&&t()}};this.getUrlVar=function(e){var t=(new RegExp(e+"=([^&]*)","i")).exec(window.location.search);return t&&unescape(t[1])||""};this.mobilecheck=function(){var e=navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/);return e};this.anchoW=function(){return window.innerWidth?window.innerWidth:$(window).width()};this.altoW=function(){return window.innerHeight?window.innerHeight:$(window).height()};this.redidensiona=function(t){window.onresize=function(){$(t).height(e.altoW)}};this.setAncho=function(t){$(t).width(e.anchoW)};this.setAlto=function(t){$(t).height(e.altoW);this.redidensiona(t)};this.dosnumeros=function(e){return e<10?"0"+e:e}}function Form(e){var t=this;this.form_id=e;this.validation=function(){$(this.form_id).validate({rules:{".required":{required:!0},email:{email:!0},url:{url:!0}},errorPlacement:function(e,t){return!0},highlight:function(e){$(e).parent().addClass("error")},unhighlight:function(e){$(e).parent().removeClass("error")},submitHandler:function(e){t.saveAsistentes(e)}})};this.saveAsistentes=function(e){var t=[];for(var n=0;n<$("#asistentes-select").val();n++)t.push({name:$("#nombre"+(n+1)).val(),"pre-boda":$("#pre-boda"+(n+1)).is(":checked"),"post-boda":$("#post-boda"+(n+1)).is(":checked")});var r={asistentes:t,email:$("#email-confirmar").val(),tel:$("#phone-confirmar").val(),key:$("#key").val()},i={url:url_ajax,dataType:"json",typeMethod:"POST",data:r,success:confirm_asistencia,errorf:error1},s=new Ajax(i);s.get_ajax()}}function Ajax(e){var t=this;this.url=e.url;this.dataType=e.dataType;this.typeMethod=e.typeMethod;this.success=e.success;this.errorf=e.errorf;this.data=e.data;this.get_ajax=function(){var e=$.ajax({url:this.url,dataType:this.dataType,type:this.typeMethod,data:this.data,cache:!0});e.success(function(e){t.ajax_done(e)});e.error(function(e){t.ajax_error(e)})};this.ajax_done=function(e){this.success(e)};this.ajax_error=function(e){this.errorf(e)}}function Modal(e){var t=this;this.modal=e.modal;this.overlay=e.overlay;this.btnClose=e.btnClose;this.messages=e.messages;this.htmlIn=e.htmlIn;var n=function(){$(t.overlay+", "+t.btnClose).on("click",function(){t.modal_hide()})}(),r=function(e,t){for(key in t)if(key===e)return t[e];return e};this.modal_show=function(e){if(!this.htmlIn){var n=r(e,this.messages);$(t.modal).children(".modal-content").html(n)}$(t.modal+","+t.overlay).addClass("activo")};this.modal_hide=function(e){$(t.modal+","+t.overlay).removeClass("activo")}}var url_ajax=is_dev?"/boda/wp-content/plugins/helper/helper-ajax.php":"/wp-content/plugins/helper/helper-ajax.php",util,modal,modal_t,idioma,testigos,lista_messages={"correct-confirm":"<h2>¡¡¡Correcto!!!</h2><h3>Has confirmado la asistencia de:</h3><ul id='confirm-asistentes-ul'></ul><p>Ahora puedes reservar el hotel <a href='#'>aquí</a> y hecha un vistazo al <a href='#'>plan del día</a></p>","error-confirm":"<h2>¡¡¡Error!!!</h2><h3>No hemos podido guardar tu confirmación, por favor intentalo de nuevo.</h3>","error-testigo":"<h2>¡¡¡Error!!!</h2><h3>No hemos podido cargar al testigo, por favor intentalo de nuevo.</h3>",info:"<h2>Paso 1</h2><h3>Introduce los datos de la recarga</h3>"},modal_object_confirm={modal:"#modal",overlay:"#modal-overlay",btnClose:"#btn-close",messages:lista_messages,htmlIn:!1};$(document).ready(function(){init();initMenu()});var initialize={home:initHome,"confirmar-asistencia":initConfirmarAsitencia},lista_escenas=[];